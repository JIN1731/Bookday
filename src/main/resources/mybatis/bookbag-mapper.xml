<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Bookbag">

	<!-- 책가방 리스트 출력 -->
	<select id="selectBookbagListById" resultType="kh.bookday.dto.BookbagDTO">
		select * from bookbag where id = #{id}
	</select>
	
	<!-- 월 구독 회원 정보 조회 -->
	<select id="selectMonthSubMemberById" resultType="kh.bookday.dto.MonthSubMemberDTO">
		select * from month_sub_member where id = #{id}
	</select>
	
	<!-- 담은 작품 삭제 --> 
	<delete id="deleteBookbagBySeq">
		delete from bookbag where bookbag_seq = #{id}
	</delete>
	
	<!-- 책 추가 --> 
	<insert id="insertBookbag">
		insert into bookbag values(bookbag_seq.nextval,#{id},#{b_isbn},#{b_img_url},#{b_title},#{b_writer})
	</insert>
	
	<!-- 위시리스트 체크 -->
	<select id="selectWishlistByIdBisbn" resultType="kh.bookday.dto.WishlistDTO">
		select * from wishlist where id = #{id} and b_isbn = #{b_isbn}
	</select>
	
	<!-- 위시리스트 추가 -->
	<insert id="insertWishlist">
		insert into wishlist values(wishlist_seq.nextval,#{id}, #{b_isbn}, #{b_img_url}, #{b_title}, #{b_writer}, #{b_genre}, default)
	</insert>
	
	<!-- 회원 배송지 정보 입력 -->
	<update id="updateMemberAddressById">
		update member set postcode = #{postcode}, address1 = #{address1}, address2 = #{address2}, reciver = #{reciver}, reciver_phone = #{reciver_phone} where id = #{id}
	</update>
	
	<!-- 월 구독 회원 등록 -->
	<insert id="insertMonthSubMemberById">
		insert into month_sub_member values(#{id}, default, default, default, default)
	</insert>
	
	<!-- 회원 등급 변경 -->
	<update id="updateMemberGradeById">
		update member set grade = '월구독' where id = #{id}
	</update>
</mapper>